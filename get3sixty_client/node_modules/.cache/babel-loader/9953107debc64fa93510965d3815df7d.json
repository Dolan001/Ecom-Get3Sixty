{"remainingRequest":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/babel-loader/lib/index.js!/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/src/views/CheckOut.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/src/views/CheckOut.vue","mtime":1647756579934},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/babel.config.js","mtime":1645704833638},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/cache-loader/dist/cjs.js","mtime":1645704829921},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/babel-loader/lib/index.js","mtime":1645704830162},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/cache-loader/dist/cjs.js","mtime":1645704829921},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/vue-loader-v16/dist/index.js","mtime":1645704830161}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kb2xhbmJhaXJhZ2kvUHVibGljL0ZyYW1ld29ya3MvUHlKcy9nZXQzU2l4dHkvZ2V0M3NpeHR5X2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2hlY2tPdXQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0OiB7CiAgICAgICAgaXRlbXM6IFtdCiAgICAgIH0sCiAgICAgIHN0cmlwZToge30sCiAgICAgIGNhcmQ6IHt9LAogICAgICBmaXJzdF9uYW1lOiAnJywKICAgICAgbGFzdF9uYW1lOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICBwaG9uZTogJycsCiAgICAgIGFkZHJlc3M6ICcnLAogICAgICB6aXBjb2RlOiAnJywKICAgICAgcGxhY2U6ICcnLAogICAgICBlcnJvcnM6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gJ0NoYWNrb3V0IHwgR2V0M3NpeHR5JzsKICAgIHRoaXMuY2FydCA9IHRoaXMuJHN0b3JlLnN0YXRlLmNhcnQ7CgogICAgaWYgKHRoaXMuY2FydFRvdGFsTGVuZ3RoID4gMCkgewogICAgICB0aGlzLnN0cmlwZSA9IFN0cmlwZSgncGtfdGVzdF81MUtjWWFLSzQ1NjJyTkZNSE1VazdybVNpQVBKTVVWVFp5ZmlsMlhXaUx6OGtGVUJFUzNZWklISUxNcEZkcXA5bU96N2RlM0xGODNacVlqbHRtaGUxd2NKQzAwaGZsd3JPSGcnKTsKICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5zdHJpcGUuZWxlbWVudHMoKTsKICAgICAgdGhpcy5jYXJkID0gZWxlbWVudHMuY3JlYXRlKCdjYXJkJywgewogICAgICAgIGhpZGVQb3N0YWxDb2RlOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmNhcmQubW91bnQoJyNjYXJkLWVsZW1lbnQnKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEl0ZW1Ub3RhbDogZnVuY3Rpb24gZ2V0SXRlbVRvdGFsKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0ucXVhbnRpdHkgKiBpdGVtLnByb2R1Y3QucHJpY2U7CiAgICB9LAogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy5maXJzdF9uYW1lID09PSAnJykgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ1RoZSBmaXJzdCBuYW1lIGZpZWxkIGlzIG1pc3NpbmcnKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGFzdF9uYW1lID09PSAnJykgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ1RoZSBsYXN0IG5hbWUgZmllbGQgaXMgbWlzc2luZycpOwogICAgICB9CgogICAgICBpZiAodGhpcy5lbWFpbCA9PT0gJycpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdUaGUgZW1haWwgZmllbGQgaXMgbWlzc2luZycpOwogICAgICB9CgogICAgICBpZiAodGhpcy5waG9uZSA9PT0gJycpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdUaGUgcGhvbmUgZmllbGQgaXMgbWlzc2luZycpOwogICAgICB9CgogICAgICBpZiAodGhpcy5hZGRyZXNzID09PSAnJykgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goJ1RoZSBhZGRyZXNzIGZpZWxkIGlzIG1pc3NpbmcnKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuemlwY29kZSA9PT0gJycpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdUaGUgemlwIGNvZGUgZmllbGQgaXMgbWlzc2luZycpOwogICAgICB9CgogICAgICBpZiAodGhpcy5wbGFjZSA9PT0gJycpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCdUaGUgcGxhY2UgZmllbGQgaXMgbWlzc2luZycpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZXJyb3JzLmxlbmd0aCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SXNMb2FkaW5nJywgdHJ1ZSk7CiAgICAgICAgdGhpcy5zdHJpcGUuY3JlYXRlVG9rZW4odGhpcy5jYXJkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SXNMb2FkaW5nJywgZmFsc2UpOwoKICAgICAgICAgICAgX3RoaXMuZXJyb3JzLnB1c2goJ1NvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggc3RyaXBlLCBwbGVhc2UgdHJ5IGFnYWluJyk7CgogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5zdHJpcGVUb2tlbkhhbmRsZXIocmVzdWx0LnRva2VuKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHN0cmlwZVRva2VuSGFuZGxlcjogZnVuY3Rpb24gc3RyaXBlVG9rZW5IYW5kbGVyKHRva2VuKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgaXRlbXMsIGksIGl0ZW0sIG9iaiwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpdGVtcyA9IFtdOwoKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBfdGhpczIuY2FydC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBpdGVtID0gX3RoaXMyLmNhcnQuaXRlbXNbaV07CiAgICAgICAgICAgICAgICAgIG9iaiA9IHsKICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiBpdGVtLnByb2R1Y3QuaWQsCiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksCiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGl0ZW0ucHJvZHVjdC5wcmljZSAqIGl0ZW0ucXVhbnRpdHkKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChvYmopOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICdmaXJzdF9uYW1lJzogX3RoaXMyLmZpcnN0X25hbWUsCiAgICAgICAgICAgICAgICAgICdsYXN0LW5hbWUnOiBfdGhpczIubGFzdF9uYW1lLAogICAgICAgICAgICAgICAgICAnZW1haWwnOiBfdGhpczIuZW1haWwsCiAgICAgICAgICAgICAgICAgICdhZGRyZXNzJzogX3RoaXMyLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICd6aXBjb2RlJzogX3RoaXMyLnppcGNvZGUsCiAgICAgICAgICAgICAgICAgICdwbGFjZSc6IF90aGlzMi5wbGFjZSwKICAgICAgICAgICAgICAgICAgJ3Bob25lJzogX3RoaXMyLnBob25lLAogICAgICAgICAgICAgICAgICAnaXRlbXMnOiBpdGVtcywKICAgICAgICAgICAgICAgICAgJ3N0cmlwZV90b2tlbic6IHRva2VuLmlkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2FwaS92MS9jaGVja291dC8nLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczIuJHN0b3JlLmNvbW1pdCgnY2xlYXJDYXJ0Jyk7CgogICAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCcvY2FydC9jaGVja291dC9zdWNjZXNzJyk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKCdTb21ldGhpbmcgd2VudCB3cm9uZyBpbiBjaGVja291dCwgcGxlYXNlIHRyeSBhZ2FpbicpOwoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuY29tbWl0KCdzZXRJc0xvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYXJ0VG90YWxMZW5ndGg6IGZ1bmN0aW9uIGNhcnRUb3RhbExlbmd0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FydC5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyVmFsKSB7CiAgICAgICAgcmV0dXJuIGFjYyArPSBjdXJWYWwucXVhbnRpdHk7CiAgICAgIH0sIDApOwogICAgfSwKICAgIGNhcnRUb3RhbFByaWNlOiBmdW5jdGlvbiBjYXJ0VG90YWxQcmljZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FydC5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyVmFsKSB7CiAgICAgICAgcmV0dXJuIGFjYyArPSBjdXJWYWwucHJvZHVjdC5wcmljZSAqIGN1clZhbC5xdWFudGl0eTsKICAgICAgfSwgMCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["axios","name","data","cart","items","stripe","card","first_name","last_name","email","phone","address","zipcode","place","errors","mounted","document","title","$store","state","cartTotalLength","Stripe","elements","create","hidePostalCode","mount","methods","getItemTotal","item","quantity","product","price","submitForm","push","length","commit","createToken","then","result","error","console","log","message","stripeTokenHandler","token","i","obj","id","post","$router","catch","computed","reduce","acc","curVal","cartTotalPrice"],"sourceRoot":"","sources":["/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/src/views/CheckOut.vue"],"sourcesContent":["<template>\n    <div class=\"page-chackout\">\n        <div class=\"columns is-multiline\">\n            <div class=\"column is-12\">\n                <h1 class=\"title\">Checkout</h1>\n            </div>\n\n            <div class=\"column is-12 box\">\n              <table class=\"table is-fullwidth\" v-if=\"cartTotalLength\">\n                  <thead>\n                      <tr>\n                          <th>Product</th>\n                          <th>Price</th>\n                          <th>Quantity</th>\n                          <th>Total</th>\n                          <th></th>\n                      </tr>\n                  </thead>\n\n                  <tbody>\n                      <tr v-for=\"item in cart.items\" :key=\"item.product.id\">\n                          <td>{{item.product.name}}</td>\n                          <td>{{item.product.price}}</td>\n                          <td>{{item.quantity}}</td>\n                          <td>${{getItemTotal(item).toFixed(2)}}</td>\n                      </tr>\n                  </tbody>\n\n                  <tfoot>\n                      <tr>\n                          <td colspan=\"2\">Total</td>\n                          <td>{{cartTotalLength}}</td>\n                          <td>{{cartTotalPrice.toFixed(2)}}</td>\n                      </tr>\n                  </tfoot>\n              </table>\n              <p v-else>You don't have any product in your cart</p>\n          </div>\n\n          <div class=\"column is-12\">\n              <h2 class=\"subtitle\">Shipping details</h2>\n              <p class=\"has-text-gray\">* All fields are required</p>\n              <br>\n\n              <div class=\"columns is-multiline\">\n                  <div class=\"column is-6\">\n                      <div class=\"field\">\n                          <label>First name*</label>\n                          <div class=\"control\">\n                              <input type=\"text\" class=\"input\" v-model=\"first_name\">\n                          </div>\n                      </div>\n\n                      <div class=\"field\">\n                          <label>Last name*</label>\n                          <div class=\"control\">\n                              <input type=\"text\" class=\"input\" v-model=\"last_name\">\n                          </div>\n                      </div>\n\n                      <div class=\"field\">\n                          <label>Email*</label>\n                          <div class=\"control\">\n                              <input type=\"email\" class=\"input\" v-model=\"email\">\n                          </div>\n                      </div>\n\n                      <div class=\"field\">\n                          <label>Phone*</label>\n                          <div class=\"control\">\n                              <input type=\"text\" class=\"input\" v-model=\"phone\">\n                          </div>\n                      </div>\n\n                  </div>\n\n                  <div class=\"column is-6\">\n                      <div class=\"field\">\n                          <label>Address*</label>\n                          <div class=\"control\">\n                              <input type=\"text\" class=\"input\" v-model=\"address\">\n                          </div>\n                      </div>\n\n                      <div class=\"field\">\n                          <label>Zip code*</label>\n                          <div class=\"control\">\n                              <input type=\"text\" class=\"input\" v-model=\"zipcode\">\n                          </div>\n                      </div>\n\n                      <div class=\"field\">\n                          <label>Place*</label>\n                          <div class=\"control\">\n                              <input type=\"text\" class=\"input\" v-model=\"place\">\n                          </div>\n                      </div>\n                  </div>\n\n                  <div class=\"notification is-danger mt-4\" v-if=\"errors.length\">\n                      <p v-for=\"error in errors\" :key=\"error\">{{error}}</p>\n                  </div>\n\n                  <hr>\n\n                  <div id=\"card-element\" class=\"mb-5\"></div>\n\n                  <template v-if=\"cartTotalLength\">\n                      <hr>\n\n                      <button class=\"button is-dark\" @click=\"submitForm\">Pay with Stripe</button>\n                  </template>\n              </div>\n          </div>\n\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n    name: 'CheckOut',\n    data(){\n        return{\n            cart: {\n                items: []\n            },\n            stripe:{},\n            card: {},\n            first_name: '',\n            last_name: '',\n            email: '',\n            phone: '',\n            address: '',\n            zipcode: '',\n            place: '',\n            errors: []\n        }\n    },\n    mounted() {\n        document.title = 'Chackout | Get3sixty'\n\n        this.cart = this.$store.state.cart\n        \n        if(this.cartTotalLength > 0){\n            this.stripe = Stripe('pk_test_51KcYaKK4562rNFMHMUk7rmSiAPJMUVTZyfil2XWiLz8kFUBES3YZIHILMpFdqp9mOz7de3LF83ZqYjltmhe1wcJC00hflwrOHg')\n            const elements = this.stripe.elements()\n            this.card = elements.create('card', {hidePostalCode: true})\n\n            this.card.mount('#card-element')\n        }\n\n    },\n    methods: {\n        getItemTotal(item){\n            return item.quantity * item.product.price\n        },\n        submitForm(){\n            this.errors = []\n\n            if(this.first_name === ''){\n                this.errors.push('The first name field is missing')\n            }\n\n            if(this.last_name === ''){\n                this.errors.push('The last name field is missing')\n            }\n\n            if(this.email === ''){\n                this.errors.push('The email field is missing')\n            }\n\n            if(this.phone === ''){\n                this.errors.push('The phone field is missing')\n            }\n\n            if(this.address === ''){\n                this.errors.push('The address field is missing')\n            }\n\n            if(this.zipcode === ''){\n                this.errors.push('The zip code field is missing')\n            }\n\n            if(this.place === ''){\n                this.errors.push('The place field is missing')\n            }\n\n            if(!this.errors.length){\n                this.$store.commit('setIsLoading', true)\n\n                this.stripe.createToken(this.card).then(result => {\n                    if(result.error){\n                        this.$store.commit('setIsLoading', false)\n                        this.errors.push('Something went wrong with stripe, please try again')\n                        console.log(result.error.message)\n                    }else{\n                        this.stripeTokenHandler(result.token)\n                    }\n                })\n            }\n        },\n        async stripeTokenHandler(token){\n            const items = []\n            for (let i = 0; i<this.cart.items.length; i++){\n                const item = this.cart.items[i]\n                const obj = {\n                    product: item.product.id,\n                    quantity: item.quantity,\n                    price: item.product.price * item.quantity\n                }\n\n                items.push(obj)\n            }\n\n            const data = {\n                'first_name': this.first_name,\n                'last-name': this.last_name,\n                'email': this.email,\n                'address': this.address,\n                'zipcode': this.zipcode,\n                'place': this.place,\n                'phone': this.phone,\n                'items': items,\n                'stripe_token': token.id\n            }\n\n            await axios\n                .post('/api/v1/checkout/', data)\n                .then(response => {\n                    this.$store.commit('clearCart')\n                    this.$router.push('/cart/checkout/success')\n                })\n                .catch(error => {\n                    this.errors.push('Something went wrong in checkout, please try again')\n                    console.log(error)\n                })\n\n                this.$store.commit('setIsLoading', false)\n        }\n    },\n    computed:{\n        cartTotalLength(){\n            return this.cart.items.reduce((acc, curVal) => {\n                return acc += curVal.quantity\n            },0)\n        },\n        cartTotalPrice(){\n            return this.cart.items.reduce((acc, curVal) => {\n                return acc += curVal.product.price * curVal.quantity\n            },0)\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>"]}]}