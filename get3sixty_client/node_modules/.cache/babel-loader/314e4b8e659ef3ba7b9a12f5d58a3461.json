{"remainingRequest":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/babel-loader/lib/index.js!/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/src/views/LogIn.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/src/views/LogIn.vue","mtime":1647362326698},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/babel.config.js","mtime":1645704833638},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/cache-loader/dist/cjs.js","mtime":1645704829921},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/babel-loader/lib/index.js","mtime":1645704830162},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/cache-loader/dist/cjs.js","mtime":1645704829921},{"path":"/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/node_modules/vue-loader-v16/dist/index.js","mtime":1645704830161}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kb2xhbmJhaXJhZ2kvUHVibGljL0ZyYW1ld29ya3MvUHlKcy9nZXQzU2l4dHkvZ2V0M3NpeHR5X2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ0luJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHBhc3N3b3JkMjogJycsCiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSAnTG9nIGluIHwgR2V0M1NpeHR5JzsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBmb3JtRGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIiI7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbVsndG9rZW4nXTsKICAgICAgICAgICAgICAgIGZvcm1EYXRhID0gewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogX3RoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvdjEvdG9rZW4vbG9naW4vJywgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXMuZGF0YS5hdXRoX3Rva2VuOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnc2V0VG9rZW4nLCB0b2tlbik7CgogICAgICAgICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gIlRva2VuICIgKyB0b2tlbjsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgdG9rZW4pOwogICAgICAgICAgICAgICAgICB2YXIgdG9QYXRoID0gX3RoaXMuJHJvdXRlLnF1ZXJ5LnRvIHx8ICcvJzsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh0b1BhdGgpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBpZiAoZXJyLnJlcykgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGVyci5yZXMuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JzLnB1c2goIiIuY29uY2F0KHByb3BlcnR5LCAiOiAiKS5jb25jYXQoZXJyLnJlcy5kYXRhW3Byb3BlcnR5XSkpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyLnJlcy5kYXRhKSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyLm1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaCgnU29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4nKTsKCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;AA4CA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;AACXC,MAAI,EAAE,OADK;AAEXC,MAFW,kBAEL;AACF,WAAM;AACFC,cAAQ,EAAE,EADR;AAEFC,cAAQ,EAAE,EAFR;AAGFC,eAAS,EAAE,EAHT;AAIFC,YAAM,EAAE;AAJN,KAAN;AAMH,GATU;AAUXC,SAVW,qBAUD;AACNC,YAAQ,CAACC,KAAT,GAAiB,oBAAjB;AACH,GAZU;AAaXC,SAAO,EAAE;AACCC,cADD,wBACa;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACdX,qBAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,EAAjD;AAEAC,4BAAY,CAACC,UAAb,CAAwB,OAAxB;AAEMC,wBALQ,GAKG;AACbd,0BAAQ,EAAE,KAAI,CAACA,QADF;AAEbC,0BAAQ,EAAE,KAAI,CAACA;AAFF,iBALH;AAUdJ,qBAAI,CACCkB,IADL,CACU,sBADV,EACkCD,QADlC,EAEKE,IAFL,CAEU,aAAE,EAAK;AAET,sBAAMC,KAAI,GAAIC,GAAG,CAACnB,IAAJ,CAASoB,UAAvB;;AACA,uBAAI,CAACC,MAAL,CAAYC,MAAZ,CAAmB,UAAnB,EAA+BJ,KAA/B;;AACApB,uBAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,WAAWM,KAA5D;AACAL,8BAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BL,KAA9B;AACA,sBAAMM,MAAK,GAAI,KAAI,CAACC,MAAL,CAAYC,KAAZ,CAAkBC,EAAlB,IAAwB,GAAvC;;AACA,uBAAI,CAACC,OAAL,CAAaC,IAAb,CAAkBL,MAAlB;AACH,iBAVL,EAWKM,KAXL,CAWW,aAAE,EAAK;AACV,sBAAIC,GAAG,CAACZ,GAAR,EAAY;AACR,yBAAI,IAAMa,QAAV,IAAsBD,GAAG,CAACZ,GAAJ,CAAQnB,IAA9B,EAAmC;AAC/B,2BAAI,CAACI,MAAL,CAAYyB,IAAZ,WAAoBG,QAApB,eAAiCD,GAAG,CAACZ,GAAJ,CAAQnB,IAAR,CAAagC,QAAb,CAAjC;AACJ;;AACAC,2BAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeL,GAAG,CAACZ,GAAJ,CAAQnB,IAAvB,CAAZ;AACJ,mBALA,MAKO,IAAI+B,GAAG,CAACM,OAAR,EAAgB;AACnB,yBAAI,CAACjC,MAAL,CAAYyB,IAAZ,CAAiB,wCAAjB;;AACAI,2BAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeL,GAAf,CAAZ;AAEJ;AACH,iBAtBL;;AAVc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiClB;AAlCK;AAbE,CAAf","names":["axios","name","data","username","password","password2","errors","mounted","document","title","methods","submitForm","defaults","headers","common","localStorage","removeItem","formData","post","then","token","res","auth_token","$store","commit","setItem","toPath","$route","query","to","$router","push","catch","err","property","console","log","JSON","stringify","message"],"sourceRoot":"","sources":["/Users/dolanbairagi/Public/Frameworks/PyJs/get3Sixty/get3sixty_client/src/views/LogIn.vue"],"sourcesContent":["<template>\n  <div class=\"page-sign-up\">\n      <div class=\"columns\">\n          <div class=\"column is-4 is-offset-4\">\n              <h1 class=\"title\">Log in</h1>\n              <form @submit.prevent=\"submitForm\">\n\n                  <div class=\"field\">\n                      <label>Username</label>\n                      <div class=\"control\">\n                          <input type=\"text\" class=\"input\" v-model=\"username\">\n                      </div>\n                  </div>\n\n                  <div class=\"field\">\n                      <label>Password</label>\n                      <div class=\"control\">\n                          <input type=\"password\" class=\"input\" v-model=\"password\">\n                      </div>\n                  </div>\n\n\n                  <div class=\"notification is-danger\" v-if=\"errors.length\">\n                      <p v-for=\"error in errors\" :key=\"error\">{{error}}</p>\n                  </div>\n\n                  <div class=\"field\">\n                      <div class=\"control\">\n                          <button class=\"button is-dark\">Log in</button>\n                        </div>                  \n                  </div>\n\n                  <hr>\n\n                  Or <router-link to=\"/sign-up\">click here</router-link> to sign up!\n\n              </form>\n          </div>\n      </div>\n\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n    name: 'LogIn',\n    data(){\n        return{\n            username: '',\n            password: '',\n            password2: '',\n            errors: []\n        }\n    },\n    mounted() {\n        document.title = 'Log in | Get3Sixty'\n    },\n    methods: {\n        async submitForm(){\n            axios.defaults.headers.common['Authorization'] = \"\"\n\n            localStorage.removeItem['token']\n\n            const formData = {\n                username: this.username,\n                password: this.password\n            }\n\n            axios\n                .post('/api/v1/token/login/', formData)\n                .then(res => {\n\n                    const token = res.data.auth_token\n                    this.$store.commit('setToken', token)\n                    axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token\n                    localStorage.setItem(\"token\", token)\n                    const toPath = this.$route.query.to || '/'\n                    this.$router.push(toPath)\n                })\n                .catch(err => {\n                    if (err.res){\n                        for(const property in err.res.data){\n                            this.errors.push(`${property}: ${err.res.data[property]}`)\n                        }\n                        console.log(JSON.stringify(err.res.data))\n                    } else if (err.message){\n                        this.errors.push('Something went wrong, please try again')\n                        console.log(JSON.stringify(err))\n\n                    }\n                })\n        }\n    },\n\n}\n</script>\n\n<style>\n\n</style>"]}]}